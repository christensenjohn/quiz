<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√¶t og Grimasser - Holdspil 2025</title>
    <style>
        @import url('fonts.googleapis.com');

        body {
            font-family: 'Comic Neue', 'Comic Sans MS', cursive, sans-serif;
            background-color: #f0e68c;
            color: #333;
            text-align: center;
            padding: 20px;
        }

        h1 { font-size: 3.5em; color: #ff6347; margin-bottom: 10px; }
        
        .container { background: rgba(255,255,255,0.8); padding: 20px; border-radius: 20px; display: inline-block; min-width: 350px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }

        #setupSk√¶rm { margin-bottom: 20px; }
        .spiller-liste { list-style: none; padding: 0; text-align: left; max-width: 300px; margin: 20px auto; }
        .spiller-emne { background: #fff; padding: 10px; margin: 5px 0; border-radius: 5px; border-left: 5px solid #4caf50; display: flex; justify-content: space-between; align-items: center; }

        #spilSk√¶rm { display: none; }
        #turIndikator { font-size: 2.2em; color: #2e8b57; font-weight: bold; margin: 15px 0; padding: 10px; background: #e0f2f1; border-radius: 10px; border: 2px solid #2e8b57; }
        #timer { font-size: 3em; color: #f44336; font-weight: bold; min-height: 1.2em; margin: 10px 0; }
        
        #sp√∏rgsm√•lViser {
            margin: 20px 0; font-size: 2.2em; color: #ff4500; padding: 30px;
            border: 4px dashed #333; display: inline-block; min-width: 80%;
            background: #fff; border-radius: 15px; min-height: 100px;
        }

        .score-board { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 20px; }
        .score-kort { background: #333; color: white; padding: 10px 20px; border-radius: 10px; min-width: 120px; transition: 0.3s; }
        .score-kort.active { border: 4px solid #ff6347; transform: scale(1.1); background: #444; }

        .button { font-size: 1.2em; padding: 12px 25px; margin: 5px; border: none; cursor: pointer; border-radius: 8px; color: white; background: #4caf50; transition: 0.2s; font-weight: bold; }
        .button:hover { opacity: 0.9; transform: translateY(-2px); }
        .button.red { background: #f44336; }
        .button.orange { background: #ff8c00; }
        .button.blue { background: #2196f3; }
        .button.grey { background: #777; }

        input, select { font-size: 1.1em; padding: 10px; border-radius: 5px; border: 1px solid #ccc; margin: 5px; }
        .setting-box { background: #fff; padding: 15px; border-radius: 10px; margin-top: 10px; text-align: left; border: 1px solid #ddd; }
        audio { display: none; }
    </style>

    <script>
        // --- INDS√ÜT DINE SP√òRGSM√ÖL HER ---
        var sp√∏rgsm√•lData = [
            {"Type": "B√∏rn", "Sp√∏rgsm√•l": "Mim en hund, der jager sin hale"},
            {"Type": "Voksne", "Sp√∏rgsm√•l": "Mim en person, der laver yoga"}
        ];

        var spillere = [];
        var nuv√¶rendeSpillerIndex = 0;
        var b√∏rnSp√∏rgsm√•l = [];
        var voksneSp√∏rgsm√•l = [];
        var tidTilbage;
        var timerInterval;
        var spilMode = "stop";

        function tilf√∏jSpiller() {
            var navnInput = document.getElementById('spillerNavn');
            var typeInput = document.getElementById('spillerType');
            if (navnInput.value.trim() === "") return alert("Indtast venligst et navn");
            spillere.push({ navn: navnInput.value.trim(), type: typeInput.value, point: 0 });
            navnInput.value = "";
            opdaterLobbyListe();
        }

        function fjernSpiller(index) {
            spillere.splice(index, 1);
            opdaterLobbyListe();
        }

        function opdaterLobbyListe() {
            var liste = document.getElementById('lobbyListe');
            liste.innerHTML = "";
            spillere.forEach((s, index) => {
                liste.innerHTML += `<li class="spiller-emne"><span><strong>${s.navn}</strong> (${s.type})</span><button onclick="fjernSpiller(${index})" style="background:none; border:none; color:red; cursor:pointer; font-weight:bold;">‚úñ</button></li>`;
            });
        }

        function startSpillet() {
            if (spillere.length < 1) return alert("Tilf√∏j mindst √©n spiller!");
            
            // iPhone Unlock - Vigtigt for 2025 iPhones!
            var lyde = ['startLyd', 'tikTakLyd', 'tidUdl√∏betLyd', 'rigtigtSvarLyd'];
            lyde.forEach(id => {
                var lyd = document.getElementById(id);
                lyd.play().then(() => { lyd.pause(); lyd.currentTime = 0; }).catch(e => console.log("Lyd-v√¶kning venter"));
            });

            spilMode = document.getElementById('modeV√¶lger').value;
            b√∏rnSp√∏rgsm√•l = sp√∏rgsm√•lData.filter(q => q.Type === 'B√∏rn');
            voksneSp√∏rgsm√•l = sp√∏rgsm√•lData.filter(q => q.Type === 'Voksne');

            document.getElementById('setupSk√¶rm').style.display = 'none';
            document.getElementById('spilSk√¶rm').style.display = 'block';
            opdaterScoreBoard();
            visN√¶steTur();
        }

        function visN√¶steTur() {
            var s = spillere[nuv√¶rendeSpillerIndex];
            document.getElementById('turIndikator').textContent = `Det er ${s.navn}s tur (${s.type})`;
            document.getElementById('sp√∏rgsm√•lViser').textContent = "Klar?";
            opdaterScoreBoard();
        }

        function hentNytSp√∏rgsm√•l() {
            var s = spillere[nuv√¶rendeSpillerIndex];
            var kilde = (s.type === 'B√∏rn') ? b√∏rnSp√∏rgsm√•l : voksneSp√∏rgsm√•l;
            if (kilde.length === 0) return "Ingen flere sp√∏rgsm√•l i denne kategori!";
            var index = Math.floor(Math.random() * kilde.length);
            var opgave = kilde[index];
            kilde.splice(index, 1);
            return opgave.Sp√∏rgsm√•l;
        }

        function startN√¶steSp√∏rgsm√•l() {
            stopTimer();
            var sp√∏rgsm√•l = hentNytSp√∏rgsm√•l();
            document.getElementById('sp√∏rgsm√•lViser').textContent = sp√∏rgsm√•l;
            if (sp√∏rgsm√•l !== "Ingen flere sp√∏rgsm√•l i denne kategori!") {
                var sek = (parseInt(document.getElementById('tidInput').value) || 1) * 60;
                startTimer(sek);
                document.getElementById('startLyd').play().catch(e => console.log("Play fejl"));
            }
        }

        function pasSp√∏rgsm√•l() {
            document.getElementById('sp√∏rgsm√•lViser').textContent = hentNytSp√∏rgsm√•l();
        }

        function rigtigtSvar() {
            document.getElementById('rigtigtSvarLyd').play().catch(e => console.log("Play fejl"));
            spillere[nuv√¶rendeSpillerIndex].point++;
            opdaterScoreBoard();
            if (spilMode === "forts√¶t" && tidTilbage > 0) {
                document.getElementById('sp√∏rgsm√•lViser').textContent = hentNytSp√∏rgsm√•l();
            } else {
                stopTimer();
                n√¶steSpiller();
            }
        }

        function startTimer(seconds) {
            tidTilbage = seconds;
            var tikTak = document.getElementById('tikTakLyd');
            var slutLyd = document.getElementById('tidUdl√∏betLyd');
            tikTak.currentTime = 0;
            tikTak.play().catch(e => console.log("Play fejl"));
            tikTak.loop = true;

            timerInterval = setInterval(() => {
                document.getElementById('timer').textContent = tidTilbage + "s";
                if (tidTilbage <= 0) {
                    clearInterval(timerInterval);
                    tikTak.pause();
                    slutLyd.currentTime = 0;
                    slutLyd.play().catch(e => console.log("Lyd blokeret af iPhone"));
                    document.getElementById('timer').textContent = "TIDEN ER G√ÖET!";
                    if (spilMode === "forts√¶t") setTimeout(n√¶steSpiller, 2500);
                }
                tidTilbage--;
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
            document.getElementById('timer').textContent = "";
            var tikTak = document.getElementById('tikTakLyd');
            if (tikTak) tikTak.pause();
        }

        function givOp() {
            stopTimer();
            n√¶steSpiller();
        }

        function n√¶steSpiller() {
            nuv√¶rendeSpillerIndex = (nuv√¶rendeSpillerIndex + 1) % spillere.length;
            visN√¶steTur();
        }

        function opdaterScoreBoard() {
            var board = document.getElementById('scoreBoard');
            board.innerHTML = "";
            spillere.forEach((s, i) => {
                var activeClass = (i === nuv√¶rendeSpillerIndex) ? "active" : "";
                board.innerHTML += `<div class="score-kort ${activeClass}">${s.navn}<br><strong>${s.point} point</strong></div>`;
            });
        }
    </script>
</head>
<body>

    <h1>G√¶t & Grimasser 2025 üé≠</h1>

    <div id="setupSk√¶rm" class="container">
        <h2>Lobby: Tilf√∏j spillere</h2>
        <input type="text" id="spillerNavn" placeholder="Navn p√• spiller">
        <select id="spillerType">
            <option value="B√∏rn">Barn</option>
            <option value="Voksne">Voksen</option>
        </select>
        <button class="button" onclick="tilf√∏jSpiller()">Tilf√∏j</button>
        
        <ul id="lobbyListe" class="spiller-liste"></ul>
        
        <div class="setting-box">
            <strong>Indstillinger:</strong><br>
            <label>Tid pr. runde (min): </label>
            <input type="number" id="tidInput" value="1" min="1" style="width: 60px;"><br>
            <label>Ved "Rigtigt!": </label>
            <select id="modeV√¶lger">
                <option value="stop">Stop tid og skift spiller</option>
                <option value="forts√¶t">Tiden k√∏rer videre (saml flere point)</option>
            </select>
        </div>
        <br>
        <button class="button blue" style="width: 100%;" onclick="startSpillet()">START SPILLET</button>
    </div>

    <div id="spilSk√¶rm" class="container">
        <div id="turIndikator"></div>
        <div id="timer"></div>
        <div id="sp√∏rgsm√•lViser">Klar?</div>
        
        <br>
        <button class="button blue" onclick="startN√¶steSp√∏rgsm√•l()">Start tur</button>
        <button class="button orange" onclick="pasSp√∏rgsm√•l()">Pas</button>
        <button class="button" onclick="rigtigtSvar()">Rigtigt!</button>
        <button class="button red" onclick="givOp()">Giv op / N√¶ste</button>
        
        <div class="score-board" id="scoreBoard"></div>
        <br>
        <button class="button grey" onclick="location.reload()">Afslut spil</button>
    </div>

    <!-- Lydfiler -->
    <audio id="startLyd" src="start.mp3" preload="auto"></audio>
    <audio id="tikTakLyd" src="tiktak.mp3" preload="auto"></audio>
    <audio id="tidUdl√∏betLyd" src="tidudloebet.mp3" preload="auto"></audio>
    <audio id="rigtigtSvarLyd" src="rigtigt.mp3" preload="auto"></audio>

</body>
</html>
